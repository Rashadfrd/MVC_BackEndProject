@using Riode.ViewModels
@model BasketVM

<a href="#" class="cart-toggle label-block link">
    <div class="cart-label d-lg-show">
        <span class="cart-name">Shopping Cart:</span>
        <span class="cart-price">$ @Model.TotalPrice</span>
    </div>
    <i class="d-icon-bag"><span class="cart-count">@Model.Products.Count()</span></i>
</a>
<div class="cart-overlay"></div>
<!-- End Cart Toggle -->
<div class="dropdown-box">
    <div class="cart-header">
        <h4 class="cart-title">Shopping Cart</h4>
        <a href="#" class="btn btn-dark btn-link btn-icon-right btn-close">
            close<i class="d-icon-arrow-right"></i><span class="sr-only">Cart</span>
        </a>
    </div>
    <div class="products scrollable">
        @foreach (var item in Model.Products)
        {
            <div class="product product-cart">
                <figure class="product-media">
                    <a href="product.html">
                        <img src="~/images/products/@item.Product.ProductImages.FirstOrDefault(x=>x.StatusImage == true).ImageUrl" alt="product" width="80"
                         height="88" />
                    </a>
                    <a asp-controller="Product" asp-action="DeleteBasket" asp-route-id="@item.Product.Id" class="btn btn-link btn-close btn-basketItemDelete">
                        <i class="fas fa-times"></i><span class="sr-only">Close</span>
                    </a>
                </figure>
                <div class="product-detail">
                    <a href="product.html" class="product-name">@item.Product.Name</a>
                    <div class="price-box">
                        <span class="product-quantity">@item.Count</span>
                        <span class="product-price">$ @(item.Product.InitialPrice-(item.Product.InitialPrice*item.Product.DiscountPercent/100))</span>
                    </div>
                </div>

            </div>
            <!-- End of Cart Product -->
        }
    </div>
    <!-- End of Products  -->
    <div class="cart-total">
        <label>Subtotal:</label>
        <span class="price">@Model.TotalPrice</span>
    </div>
    <!-- End of Cart Total -->
    <div class="cart-action">
        <a href="cart.html" class="btn btn-dark btn-link">View Cart</a>
        <a href="checkout.html" class="btn btn-dark"><span>Go To Checkout</span></a>
    </div>
    <!-- End of Cart Action -->
</div>
<!-- End Dropdown Box -->
